<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/css/freewrite_page/freewrite_list.css" />
    <title>자유게시판 목록페이지</title>
</head>
<body>
<div id="__next">
    <div class="wrap1">
        <h1 data-testid="Typography" color="gray900" class="content1">
            자유게시판<br />목록
        </h1>
        <p data-testid="Typography" color="gray900" class="content2">
            1. 욕설, 비방을 삼가주세요<br />
            2. 사이트의 목적과 맞지 않는 광고를 삼가주세요<br />
            3. 궁금한 점은 관리자에게 물어봐주세요
        </p>

        <ul class="wrap2">
            <li class="content4">
                <div class="wrap3">
                    <div class="content5">
                        <div class="wrap4">
                            <div class="wrap5">
                                <div class="wrap6">
                                    <div class="content6">
                                        <input
                                                id="freewriteSearch-keyword"
                                                placeholder="게시글제목, 닉네임 검색"
                                                class="content7"
                                                type="text"
                                                value=""
                                                style="background-color: white;"
                                        />
                                        <!-- 검색 버튼 -->
                                        <button type="button" id="freewriteSearch-button"></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </li>
        </ul>

        <!-- 게시글 목록 및 페이지네이션 -->
        <div class="wrap9" style="padding-top: 80px">
            <div class="background" style="background-color: white">
                <div class="list-bordered">
                    <div class="bg-white" id="page-container">
                        <div class="FAQ_container align-items-center">
                            <div class="articlelist row" style="display: flex">
                                <div class="section_container">

                                    <div class="wrap7">
                                        <div class="wrap8 content8">
                                            <div class="content9">
                                                <span class="selected-value">최신 업데이트 순</span>
                                                <img
                                                        src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI1LjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA4IDYiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDggNjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPgoJLnN0MHtmaWxsLXJ1bGU6ZXZlbm9kZDtjbGlwLXJ1bGU6ZXZlbm9kZDt9Cjwvc3R5bGU+CjxnIGlkPSJfeDJEX2ljb24iPgoJPGcgaWQ9Ikdyb3VwIj4KCQk8ZyBpZD0iRmlsbC0xIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0LjAwMDAwMCwgMy4wMDAwMDApIHNjYWxlKDEsIC0xKSB0cmFuc2xhdGUoLTQuMDAwMDAwLCAtMy4wMDAwMDApICI+CgkJCTxwYXRoIGlkPSJwYXRoLTFfMV8iIGNsYXNzPSJzdDAiIGQ9Ik0zLjQsNS43TDAuMiwxLjRDLTAuMiwwLjgsMC4xLDAsMC44LDBoNi40YzAuNywwLDEsMC44LDAuNiwxLjRMNC42LDUuNwoJCQkJQzQuMyw2LjEsMy43LDYuMSwzLjQsNS43Ii8+CgkJPC9nPgoJPC9nPgo8L2c+Cjwvc3ZnPgo="
                                                        class="rotate"
                                                        width="8px"
                                                        height="6px"
                                                />
                                            </div>
                                        </div>
                                        <div class="dropdown-menu">
                                            <a href="/freewrite_page/list?order=recent">최신 업데이트 순</a>
                                            <a href="/freewrite_page/list?order=popular">조회수 높은 순</a>
                                        </div>
                                    </div>

                                    <!-- 게시글 출력 -->
                                    <table id="post-table">
                                        <div th:each="freewrite : ${freewrites}" class="card-container" style="position: relative; margin-bottom: 20px;">
                                            <a th:href="@{/freewrite_page/detail(id=${freewrite.id})}" style="text-decoration: none; color: inherit; position: absolute; top: 0; left: 0; right: 0; bottom: 0; z-index: 1;"></a>
                                            <div class="flex">
                                                <div class="ydsfooter_munu_bar section_document card">
                                                    <div style="margin-top: 10px">
                                                        <div class="sc-73fafee5-0 ejqkLc">
                                                            <img src="https://image.wanted.co.kr/gigs/www/wanted/icon-business-bag.svg" />
                                                        </div>

                                                        <!-- 사용자 닉네임 -->
                                                        <div class="FAQ_card_title">
                                                            <div class="font-size-sm font-medium FAQ_card_answers" style="width: 40px; text-align: center; margin-top: 4px;">
                                                                <span th:text="${freewrite.memberNickname}">닉네임</span>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <!-- 글 제목 -->
                                                    <div>
                                                        <div class="writetitle">
                                                            <span th:text="${freewrite.postTitle}">글의 제목</span>
                                                        </div>

                                                        <!-- 글 내용 -->
                                                        <div class="writecontent">
                                                            <span th:text="${freewrite.postContent}">글의 내용</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </table>



                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <ul class="wrap21">
                <div id="post-wrap" style="display: flex"></div>
            </ul>

        </div>
    </div>

    <a href="/freewrite_page/write">
        <button class="floating-button">글 작성하기</button>
    </a>
</div>

</body>
<script th:inline="javascript">
    const freewritePagination = {
        currentPage: [[${freewritePagination.page}]], // 현재 페이지
        totalPages: [[${freewritePagination.realEnd}]], // 총 페이지 수
        startPage: [[${freewritePagination.startPage}]], // 시작 페이지 (예: 1, 11, 21...)
        endPage: [[${freewritePagination.endPage}]], // 끝 페이지 (예: 10, 20, 30...)
        prev: [[${freewritePagination.prev}]], // 이전 버튼 활성화 여부
        next: [[${freewritePagination.next}]] // 다음 버튼 활성화 여부
    };

    const keyword = [[${keyword}]] || "";  // 검색어 값 유지
    const order = [[${order}]] || "recent";  // 정렬 값 유지

    const pageWrap = document.getElementById("post-wrap");
    let text = '';

    // **이전** 버튼을 출력
    if (freewritePagination.prev && freewritePagination.startPage > 1) {
        // 이전 그룹의 첫 페이지로 이동 (예: 11에서 -> 1)
        text += `<a href="?page=${freewritePagination.startPage - 10}&keyword=${keyword}&order=${order}" class="prev">이전</a>`;
    } else {
        text += `<span class="prev disabled">이전</span>`;
    }

    // 페이지 번호 출력 (검색어와 정렬 조건 유지)
    for (let i = freewritePagination.startPage; i <= Math.min(freewritePagination.endPage, freewritePagination.totalPages); i++) {
        if (i === freewritePagination.currentPage) {
            text += `<a href="?page=${i}&keyword=${keyword}&order=${order}" class="current">${i}</a>`;
        } else {
            text += `<a href="?page=${i}&keyword=${keyword}&order=${order}">${i}</a>`;
        }
    }

    // **다음** 버튼을 마지막에 출력
    if (freewritePagination.next && freewritePagination.endPage < freewritePagination.totalPages) {
        // 다음 그룹의 첫 페이지로 이동 (예: 10에서 -> 11)
        text += `<a href="?page=${freewritePagination.endPage + 1}&keyword=${keyword}&order=${order}" class="next">다음</a>`;
    } else {
        text += `<span class="next disabled">다음</span>`;
    }

    pageWrap.innerHTML = text;
</script>

</script>
<script>
    const searchButton = document.getElementById("freewriteSearch-button");
    const searchInput = document.getElementById("freewriteSearch-keyword");

    searchButton.addEventListener("click", function() {
        // 검색어 가져오기
        let keyword = searchInput.value.trim();
        // 검색어가 비어 있으면 빈 문자열로 설정
        if (!keyword) {
            keyword = "";
        }
        // 검색 수행
        window.location.href = `/freewrite_page/list?keyword=${keyword}&order=recent`;
    });

    searchInput.addEventListener("keyup", function(event) {
        if (event.key === "Enter") {
            searchButton.click();
        }
    });

</script>

<script src="/js/freewrite_page/freewrite_list.js"></script>
</html>





